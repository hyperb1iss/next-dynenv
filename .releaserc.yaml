branches:
    - name: 1.x
      range: 1.x
      channel: 1.x
    - name: 2.x
      range: 2.x
      channel: 2.x
    - main
    - name: development
      prerelease: alpha
      channel: alpha

plugins:
    # Analyze commits using conventional commits
    - - '@semantic-release/commit-analyzer'
      - preset: angular
        releaseRules:
            - scope: no-release
              release: false
            - type: build
              release: patch
            - type: chore
              release: patch
            - type: ci
              release: false
            - type: docs
              release: false
            - type: style
              release: patch
            - type: refactor
              release: patch
            - type: test
              release: patch

    # Generate beautiful release notes
    - - '@semantic-release/release-notes-generator'
      - preset: angular
        writerOpts:
            groupBy: 'type'
            commitGroupsSort: 'title'
            commitsSort: ['scope', 'subject']
        presetConfig:
            types:
                - type: feat
                  section: 'âœ¨ Features'
                  hidden: false
                - type: fix
                  section: 'ğŸ› Bug Fixes'
                  hidden: false
                - type: perf
                  section: 'âš¡ Performance Improvements'
                  hidden: false
                - type: revert
                  section: 'âª Reverts'
                  hidden: false
                - type: docs
                  section: 'ğŸ“š Documentation'
                  hidden: false
                - type: style
                  section: 'ğŸ’„ Styles'
                  hidden: false
                - type: chore
                  section: 'ğŸ”§ Maintenance'
                  hidden: false
                - type: refactor
                  section: 'â™»ï¸ Code Refactoring'
                  hidden: false
                - type: test
                  section: 'âœ… Tests'
                  hidden: false
                - type: build
                  section: 'ğŸ—ï¸ Build System'
                  hidden: false
                - type: ci
                  section: 'ğŸ‘· CI/CD'
                  hidden: true

    # Publish to npm
    - - '@semantic-release/npm'

    # Create GitHub release with assets
    - - '@semantic-release/github'
      - assets:
            - path: build/**/*
              label: Build artifacts
        successComment: |
            ### ğŸ‰ This ${issue.pull_request ? 'PR is included' : 'issue has been resolved'} in version ${nextRelease.version}

            The release is available on:
            - ğŸ“¦ [npm package (@latest dist-tag)](https://www.npmjs.com/package/@hyperb1iss/next-runtime-env/v/${nextRelease.version})
            - ğŸ“ [GitHub release](${releases[0].url})

            Your **${issue.pull_request ? 'pull request' : 'issue'}** is in ${nextRelease.channel ? `**${nextRelease.channel}** channel` : '**production**'}!

            ---
            <sub>ğŸ¤– Generated by [semantic-release](https://github.com/semantic-release/semantic-release)</sub>
        failComment: false
        releasedLabels:
            - released<%= nextRelease.channel ? `-${nextRelease.channel}` : '' %>
